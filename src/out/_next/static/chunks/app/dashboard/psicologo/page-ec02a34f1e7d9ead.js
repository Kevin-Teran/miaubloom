(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39],{8203:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},7346:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},2176:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},9409:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7972:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},480:function(e,t,s){Promise.resolve().then(s.bind(s,2307))},2307:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(7437),r=s(2265),n=s(4033),i=s(5806),l=s(6763),c=s(9409),d=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,d.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var u=s(6831),x=s(7972),h=s(8203),m=s(7346),f=s(2176);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,d.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var g=s(6110),v=s(9213),y=s(9311);let j=(0,v.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function N(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,y.cn)(j({variant:s}),t),...r})}/**
 * @file page.tsx
 * @route app/dashboard/psicologo/page.tsx
 * @description Dashboard principal para psicólogos.
 * Incluye lista de pacientes, citas pendientes y notificaciones importantes.
 * @author Kevin Mariano
 * @version 2.0.5
 * @since 1.0.0
 * @copyright MiauBloom
 */function b(){let{user:e,perfil:t,loading:s}=(0,i.useAuth)(),d=(0,n.useRouter)(),[v,y]=(0,r.useState)([]),[j,b]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(!s&&(!e||!t||"psicologo"!==t.rol)){d.push("/");return}e&&(null==t?void 0:t.rol)==="psicologo"&&(w(),C())},[e,t,s,d]);let w=async()=>{if(!e)return;let t=new Date;t.setHours(0,0,0,0);let s=new Date(t);s.setDate(s.getDate()+1);let{data:a}=await l.O.from("citas").select("\n        *,\n        paciente:perfiles!citas_paciente_id_fkey(*)\n      ").eq("psicologo_id",e.id).gte("fecha_hora",t.toISOString()).lt("fecha_hora",s.toISOString()).order("fecha_hora",{ascending:!0});a&&y(a)},C=async()=>{if(!e)return;let{count:t}=await l.O.from("relacion_paciente_psicologo").select("*",{count:"exact",head:!0}).eq("psicologo_id",e.id).eq("estado","activa");null!==t&&b(t)};return s||!t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-pulse text-xl",children:"Cargando..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#F2C2C1]/20 to-white pb-20",children:[(0,a.jsxs)("div",{className:"bg-[#F2C2C1] px-4 py-6 rounded-b-3xl shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("button",{onClick:()=>d.push("/dashboard/psicologo/configuracion"),children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsx)("button",{onClick:()=>d.push("/dashboard/psicologo/notificaciones"),children:(0,a.jsx)(o,{className:"w-6 h-6 text-white"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"w-6 h-6 text-[#F2C2C1]"})}),(0,a.jsxs)("div",{className:"text-white",children:[(0,a.jsx)("p",{className:"text-sm opacity-90",children:"Hola, Andr\xe9s!"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:"Empecemos"})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-center py-6",children:(0,a.jsx)("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-lg",children:(0,a.jsx)(u.Z,{className:"w-16 h-16 text-[#F2C2C1]"})})})]}),(0,a.jsxs)("div",{className:"px-4 py-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(g.Zb,{className:"bg-white",children:(0,a.jsxs)(g.aY,{className:"pt-6 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-[#F2C2C1]",children:v.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Citas hoy"})]})}),(0,a.jsx)(g.Zb,{className:"bg-white",children:(0,a.jsxs)(g.aY,{className:"pt-6 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-[#2ECC71]",children:j}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Pacientes activos"})]})})]}),(0,a.jsxs)(g.Zb,{children:[(0,a.jsx)(g.Ol,{className:"pb-3",children:(0,a.jsx)(g.ll,{className:"text-lg",children:"Mis pacientes"})}),(0,a.jsx)(g.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:[1,2,3,4].map(e=>(0,a.jsxs)("div",{onClick:()=>d.push("/dashboard/psicologo/pacientes"),className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-[#F2C2C1]/20 rounded-full flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-6 h-6 text-[#F2C2C1]"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"font-medium text-sm",children:["Paciente ",e]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"\xdaltima sesi\xf3n hace 3 d\xedas"})]}),(0,a.jsx)(N,{variant:1===e?"destructive":"secondary",className:"text-xs",children:1===e?"Cr\xedtico":"Estable"})]},e))})})]}),(0,a.jsxs)(g.Zb,{children:[(0,a.jsx)(g.Ol,{className:"pb-3",children:(0,a.jsx)(g.ll,{className:"text-lg",children:"Citas pendientes"})}),(0,a.jsx)(g.aY,{children:0===v.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No tienes citas programadas para hoy"}):(0,a.jsx)("div",{className:"space-y-3",children:v.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-[#F2C2C1]/10",children:[(0,a.jsx)(h.Z,{className:"w-10 h-10 text-[#F2C2C1]"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:new Date(e.fecha_hora).toLocaleTimeString("es",{hour:"2-digit",minute:"2-digit"})}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[e.duracion_minutos," minutos"]})]})]},e.id))})})]})]}),(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3",children:(0,a.jsxs)("div",{className:"flex justify-around items-center",children:[(0,a.jsxs)("button",{className:"flex flex-col items-center space-y-1",children:[(0,a.jsx)(m.Z,{className:"w-6 h-6 text-[#F2C2C1]"}),(0,a.jsx)("span",{className:"text-xs text-[#F2C2C1] font-medium",children:"Home"})]}),(0,a.jsxs)("button",{onClick:()=>d.push("/dashboard/psicologo/chat"),className:"flex flex-col items-center space-y-1",children:[(0,a.jsx)(f.Z,{className:"w-6 h-6 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Mensajes"})]}),(0,a.jsxs)("button",{onClick:()=>d.push("/dashboard/psicologo/citas"),className:"flex flex-col items-center space-y-1",children:[(0,a.jsx)(h.Z,{className:"w-6 h-6 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Citas"})]}),(0,a.jsxs)("button",{onClick:()=>d.push("/dashboard/psicologo/pacientes"),className:"flex flex-col items-center space-y-1",children:[(0,a.jsx)(p,{className:"w-6 h-6 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Pacientes"})]})]})})]})}},6110:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var a=s(7437),r=s(2265),n=s(9311);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},5806:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return l},useAuth:function(){return c}});var a=s(7437),r=s(2265),n=s(6763);/**
 * @file auth-context.tsx
 * @route lib/auth-context.tsx
 * @description Contexto de autenticación para gestionar el estado del usuario en toda la app.
 * Proporciona información del usuario actual, rol y métodos de autenticación.
 * @author Kevin Mariano
 * @version 2.0.5
 * @since 1.0.0
 * @copyright MiauBloom
 */let i=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[o,u]=(0,r.useState)(!0),x=async e=>{let{data:t,error:s}=await n.O.from("perfiles").select("*").eq("id",e).maybeSingle();t&&!s&&d(t)},h=async()=>{s&&await x(s.id)};(0,r.useEffect)(()=>{let e=async()=>{var e;let{data:{session:t}}=await n.O.auth.getSession();l(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),(null==t?void 0:t.user)&&await x(t.user.id),u(!1)};e();let{data:{subscription:t}}=n.O.auth.onAuthStateChange(async(e,t)=>{var s;l(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),(null==t?void 0:t.user)?await x(t.user.id):d(null)});return()=>t.unsubscribe()},[]);let m=async(e,t)=>{let{error:s}=await n.O.auth.signInWithPassword({email:e,password:t});return{error:s}},f=async(e,t,s,a)=>{let{data:r,error:i}=await n.O.auth.signUp({email:e,password:t});if(i||!r.user)return{error:i};let{error:l}=await n.O.from("perfiles").insert({id:r.user.id,nombre_completo:s,rol:a,onboarding_completado:!1});return{error:l}},p=async()=>{await n.O.auth.signOut(),d(null)};return(0,a.jsx)(i.Provider,{value:{user:s,perfil:c,loading:o,signIn:m,signUp:f,signOut:p,refreshPerfil:h},children:t})}function c(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth debe usarse dentro de un AuthProvider");return e}},6763:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});var a=s(5257);/**
 * @file supabase.ts
 * @route lib/supabase.ts
 * @description Cliente singleton de Supabase para toda la aplicación.
 * Maneja la conexión con la base de datos y autenticación.
 * @author Kevin Mariano
 * @version 2.0.5
 * @since 1.0.0
 * @copyright MiauBloom
 */let r="https://ycmzikcuwgmmymfcgjhe.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InljbXppa2N1d2dtbXltZmNnamhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk4NTQ3NzcsImV4cCI6MjA3NTQzMDc3N30.alLSxOLNgfKV-7-8MhQ6vfE-ij1t2PvBDEeZK11-H04";if(!r||!n)throw Error("Faltan las variables de entorno de Supabase");let i=(0,a.eI)(r,n,{auth:{persistSession:!0,autoRefreshToken:!0}})},9311:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(7042),r=s(4769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[849,721,971,864,744],function(){return e(e.s=480)}),_N_E=e.O()}]);