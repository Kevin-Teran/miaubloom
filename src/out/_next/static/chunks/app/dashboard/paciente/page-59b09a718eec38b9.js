(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[764],{8203:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},7346:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},2176:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},9409:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7972:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4544:function(e,t,s){Promise.resolve().then(s.bind(s,7319))},7319:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(7437),r=s(2265),n=s(4033),l=s(5806),i=s(6763),c=s(9409),d=s(2176),o=s(6831),u=s(8203),x=s(7346),h=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,h.Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),m=(0,h.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var p=s(7972),g=s(6110),v=s(3023);/**
 * @file page.tsx
 * @route app/dashboard/paciente/page.tsx
 * @description Dashboard principal para pacientes.
 * Incluye visualización del jardín emocional, tareas, citas y accesos rápidos.
 * @author Kevin Mariano
 * @version 2.0.5
 * @since 1.0.0
 * @copyright MiauBloom
 */function y(){let{user:e,perfil:t,loading:s}=(0,l.useAuth)(),h=(0,n.useRouter)(),[y,j]=(0,r.useState)([]),[N,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!s&&(!e||!t||"paciente"!==t.rol)){h.push("/");return}e&&(null==t?void 0:t.rol)==="paciente"&&(w(),C())},[e,t,s,h]);let w=async()=>{if(!e)return;let{data:t}=await i.O.from("tareas_terapeuticas").select("*").eq("paciente_id",e.id).eq("completada",!1).order("fecha_vencimiento",{ascending:!0}).limit(3);t&&j(t)},C=async()=>{if(!e)return;let{data:t}=await i.O.from("citas").select("*").eq("paciente_id",e.id).eq("estado","programada").gte("fecha_hora",new Date().toISOString()).order("fecha_hora",{ascending:!0}).limit(1).maybeSingle();t&&b(t)};return s||!t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-pulse text-xl",children:"Cargando..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#F2C2C1]/20 to-white pb-20",children:[(0,a.jsxs)("div",{className:"bg-[#F2C2C1] px-4 py-6 rounded-b-3xl shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("button",{onClick:()=>h.push("/dashboard/paciente/configuracion"),children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsx)("button",{onClick:()=>h.push("/dashboard/paciente/chat"),children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-white"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-6 h-6 text-[#F2C2C1]"})}),(0,a.jsxs)("div",{className:"text-white",children:[(0,a.jsx)("p",{className:"text-sm opacity-90",children:"Hola,"}),(0,a.jsx)("p",{className:"text-xl font-semibold",children:t.nombre_completo.split(" ")[0]})]})]}),(0,a.jsx)("div",{className:"mt-6 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-32 h-32 bg-white rounded-full flex items-center justify-center shadow-lg",children:(0,a.jsx)(o.Z,{className:"w-20 h-20 text-[#F2C2C1]"})})}),(0,a.jsx)("div",{className:"text-center mt-4 text-white",children:(0,a.jsx)("p",{className:"text-sm",children:"\xbfC\xf3mo te sientes hoy?"})})]}),(0,a.jsxs)("div",{className:"px-4 py-6 space-y-6",children:[(0,a.jsxs)(g.Zb,{children:[(0,a.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between pb-3",children:[(0,a.jsx)(g.ll,{className:"text-lg",children:"Mis tareas"}),(0,a.jsx)(v.z,{variant:"ghost",size:"sm",onClick:()=>h.push("/dashboard/paciente/tareas"),children:"Ver todas"})]}),(0,a.jsx)(g.aY,{className:"space-y-3",children:0===y.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No tienes tareas pendientes"}):y.map(e=>(0,a.jsx)("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-gray-50",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.titulo}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.descripcion})]})},e.id))})]}),(0,a.jsxs)(g.Zb,{children:[(0,a.jsx)(g.Ol,{className:"pb-3",children:(0,a.jsx)(g.ll,{className:"text-lg",children:"Mi actividad"})}),(0,a.jsx)(g.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"p-3 bg-[#FFD700]/10 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-[#FFD700]",children:"68%"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:"Alegr\xeda"})]}),(0,a.jsxs)("div",{className:"p-3 bg-[#2ECC71]/10 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-[#2ECC71]",children:"75%"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:"Calma"})]}),(0,a.jsxs)("div",{className:"p-3 bg-[#4A90E2]/10 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-[#4A90E2]",children:"65%"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:"Tristeza"})]})]})})]}),N&&(0,a.jsxs)(g.Zb,{children:[(0,a.jsx)(g.Ol,{className:"pb-3",children:(0,a.jsx)(g.ll,{className:"text-lg",children:"Pr\xf3xima cita"})}),(0,a.jsx)(g.aY,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-[#F2C2C1]/10 rounded-lg",children:[(0,a.jsx)(u.Z,{className:"w-10 h-10 text-[#F2C2C1]"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:new Date(N.fecha_hora).toLocaleDateString("es",{weekday:"long",day:"numeric",month:"long"})}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:new Date(N.fecha_hora).toLocaleTimeString("es",{hour:"2-digit",minute:"2-digit"})})]})]})})]})]}),(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3",children:(0,a.jsxs)("div",{className:"flex justify-around items-center",children:[(0,a.jsxs)("button",{className:"flex flex-col items-center space-y-1",children:[(0,a.jsx)(x.Z,{className:"w-6 h-6 text-[#F2C2C1]"}),(0,a.jsx)("span",{className:"text-xs text-[#F2C2C1] font-medium",children:"Home"})]}),(0,a.jsxs)("button",{onClick:()=>h.push("/dashboard/paciente/calendario"),className:"flex flex-col items-center space-y-1",children:[(0,a.jsx)(f,{className:"w-6 h-6 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Estad\xedsticas"})]}),(0,a.jsx)("button",{onClick:()=>h.push("/dashboard/paciente/registrar"),className:"w-14 h-14 bg-[#F2C2C1] rounded-full flex items-center justify-center -mt-6 shadow-lg",children:(0,a.jsx)(m,{className:"w-8 h-8 text-white"})}),(0,a.jsxs)("button",{onClick:()=>h.push("/dashboard/paciente/citas"),className:"flex flex-col items-center space-y-1",children:[(0,a.jsx)(u.Z,{className:"w-6 h-6 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Citas"})]}),(0,a.jsxs)("button",{onClick:()=>h.push("/dashboard/paciente/perfil"),className:"flex flex-col items-center space-y-1",children:[(0,a.jsx)(p.Z,{className:"w-6 h-6 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Perfil"})]})]})})]})}},3023:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var a=s(7437),r=s(2265),n=s(4949),l=s(9213),i=s(9311);let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:d=!1,...o}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(c({variant:r,size:l,className:s})),ref:t,...o})});d.displayName="Button"},6110:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var a=s(7437),r=s(2265),n=s(9311);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},5806:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return i},useAuth:function(){return c}});var a=s(7437),r=s(2265),n=s(6763);/**
 * @file auth-context.tsx
 * @route lib/auth-context.tsx
 * @description Contexto de autenticación para gestionar el estado del usuario en toda la app.
 * Proporciona información del usuario actual, rol y métodos de autenticación.
 * @author Kevin Mariano
 * @version 2.0.5
 * @since 1.0.0
 * @copyright MiauBloom
 */let l=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[o,u]=(0,r.useState)(!0),x=async e=>{let{data:t,error:s}=await n.O.from("perfiles").select("*").eq("id",e).maybeSingle();t&&!s&&d(t)},h=async()=>{s&&await x(s.id)};(0,r.useEffect)(()=>{let e=async()=>{var e;let{data:{session:t}}=await n.O.auth.getSession();i(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),(null==t?void 0:t.user)&&await x(t.user.id),u(!1)};e();let{data:{subscription:t}}=n.O.auth.onAuthStateChange(async(e,t)=>{var s;i(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),(null==t?void 0:t.user)?await x(t.user.id):d(null)});return()=>t.unsubscribe()},[]);let f=async(e,t)=>{let{error:s}=await n.O.auth.signInWithPassword({email:e,password:t});return{error:s}},m=async(e,t,s,a)=>{let{data:r,error:l}=await n.O.auth.signUp({email:e,password:t});if(l||!r.user)return{error:l};let{error:i}=await n.O.from("perfiles").insert({id:r.user.id,nombre_completo:s,rol:a,onboarding_completado:!1});return{error:i}},p=async()=>{await n.O.auth.signOut(),d(null)};return(0,a.jsx)(l.Provider,{value:{user:s,perfil:c,loading:o,signIn:f,signUp:m,signOut:p,refreshPerfil:h},children:t})}function c(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth debe usarse dentro de un AuthProvider");return e}},6763:function(e,t,s){"use strict";s.d(t,{O:function(){return l}});var a=s(5257);/**
 * @file supabase.ts
 * @route lib/supabase.ts
 * @description Cliente singleton de Supabase para toda la aplicación.
 * Maneja la conexión con la base de datos y autenticación.
 * @author Kevin Mariano
 * @version 2.0.5
 * @since 1.0.0
 * @copyright MiauBloom
 */let r="https://ycmzikcuwgmmymfcgjhe.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InljbXppa2N1d2dtbXltZmNnamhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk4NTQ3NzcsImV4cCI6MjA3NTQzMDc3N30.alLSxOLNgfKV-7-8MhQ6vfE-ij1t2PvBDEeZK11-H04";if(!r||!n)throw Error("Faltan las variables de entorno de Supabase");let l=(0,a.eI)(r,n,{auth:{persistSession:!0,autoRefreshToken:!0}})},9311:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(7042),r=s(4769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}},4949:function(e,t,s){"use strict";s.d(t,{g7:function(){return n}});var a=s(2265),r=s(7437),n=a.forwardRef((e,t)=>{let{children:s,...n}=e,i=a.Children.toArray(s),d=i.find(c);if(d){let e=d.props.children,s=i.map(t=>t!==d?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,r.jsx)(l,{...n,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,s):null})}return(0,r.jsx)(l,{...n,ref:t,children:s})});n.displayName="Slot";var l=a.forwardRef((e,t)=>{let{children:s,...r}=e;if(a.isValidElement(s)){let e,n;let l=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.props.ref:s.props.ref||s.ref;return a.cloneElement(s,{...function(e,t){let s={...t};for(let a in t){let r=e[a],n=t[a],l=/^on[A-Z]/.test(a);l?r&&n?s[a]=(...e)=>{n(...e),r(...e)}:r&&(s[a]=r):"style"===a?s[a]={...r,...n}:"className"===a&&(s[a]=[r,n].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props),ref:t?function(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}(t,l):l})}return a.Children.count(s)>1?a.Children.only(null):null});l.displayName="SlotClone";var i=({children:e})=>(0,r.jsx)(r.Fragment,{children:e});function c(e){return a.isValidElement(e)&&e.type===i}}},function(e){e.O(0,[849,721,971,864,744],function(){return e(e.s=4544)}),_N_E=e.O()}]);